(function($){var params,availableStylesheets,activeStylesheetIndex,dictionary,alternates,altLinkClasses;$.fn.styleswitcher={};$(document).ready(function(){$.fn.styleswitcher();});$.fn.styleswitcher=function(){params=$.extend({},$.fn.styleswitcher.defaults,Utils.loadParamsFromScriptID("styleswitcher"));params.helpLink={"eng":params.helpLinkEng,"fra":params.helpLinkFra};dictionary={toggleLinkValue:{fra:"Basculer par les options d'apparence",eng:"Toggle through the appearance options"},menuLinkValue:{fra:"Options de couleur",eng:"Colour options"},defaultLinkValue:{fra:"Th&#232;me par d&#233;faut",eng:"Default theme"},altLinkValues:[{fra:'Haute couleur de contraste',eng:'High contrast colour'},{fra:'Th&#232;me de couleur 1',eng:'Colour theme 1'},{fra:'Th&#232;me de couleur 2',eng:'Colour theme 2'},{fra:'Th&#232;me de couleur 3',eng:'Colour theme 3'},{fra:'Th&#232;me de couleur 4',eng:'Colour theme 4'},{fra:'Th&#232;me de couleur 5',eng:'Colour theme 5'},{fra:'Th&#232;me de couleur 6',eng:'Colour theme 6'},{fra:'Th&#232;me de couleur 7',eng:'Colour theme 7'},{fra:'Th&#232;me de couleur 8',eng:'Colour theme 8'},{fra:'Th&#232;me de couleur 9',eng:'Colour theme 9'}],downloadLinkValue:{fra:"Installer un feuille de style d'haute contraste pour affecter tous les sites Web du <abbr title='Gouvernement du Canada'>GC</abbr>",eng:"Install a high contrast style sheet that affects <strong>all</strong> <abbr title='Government of Canada'>GC</abbr> Web sites"}};alternates=['contrast.css','theme-1.css','theme-2.css','theme-3.css','theme-4.css','theme-5.css','theme-6.css','theme-7.css','theme-8.css','theme-9.css'];altLinkClasses=['theme-contrast','theme-1','theme-2','theme-3','theme-4','theme-5','theme-6','theme-7','theme-8','theme-9'];availableStylesheets=[];activeStylesheetIndex=0;$.fn.styleswitcher.init($('.utilities ul:first'));availableStylesheets.push('');for(var i=0;i<alternates.length;i++){if(alternates[i].length){availableStylesheets.push(alternates[i]);}}
var c=readCookie(params.cookie);if(c){$.fn.styleswitcher.switchTo(c);}
$('.styleswitcherdefault').bind('click',function(){$.fn.styleswitcher.switchTo('');return false;});$('.styleswitcher').bind('click',function(){$.fn.styleswitcher.switchTo(this.getAttribute('rel'));return false;});$('#toggler').bind('click',function(){$.fn.styleswitcher.toggle();return false;});};$.fn.styleswitcher.defaults={cookie:'styleswitcher',helpLinkEng:'http://infozone/english/gbl/util/clr-eng.html',helpLinkFra:'http://infozone/francais/gbl/util/clr-fra.html'};$.fn.styleswitcher.init=function($parent){var $menu=$('<li>');$menu.append('<a class="utility-theme toggle-link-text" href="'+params.helpLink[PE.language]+'">'+dictionary.menuLinkValue[PE.language]+'</a>');var $submenu=$('<ul class="toggle-menu"></ul>');$submenu.append('<li><a href="#" class="styleswitcherdefault theme-default">'+dictionary.defaultLinkValue[PE.language]+'</a></li>');for(var i=0;i<alternates.length;i++){$submenu.append('<li><a href="#" rel="'+alternates[i]+'" class="styleswitcher '+altLinkClasses[i]+'">'+dictionary.altLinkValues[i][PE.language]+'</a></li>');}
$submenu.append('<li><a href="#" id="toggler" class="theme-toggle">'+dictionary.toggleLinkValue[PE.language]+'</a></li>');$submenu.append('<li><a href="http://www.tbs-sct.gc.ca/clf2-nsi2/tb-bo/acch-aacc-'+PE.language+'.asp" class="theme-contrast-download">'+dictionary.downloadLinkValue[PE.language]+'</a></li>');$menu.append($submenu);$parent.append($menu);};$.fn.styleswitcher.toggle=function(){activeStylesheetIndex++;activeStylesheetIndex%=availableStylesheets.length;$.fn.styleswitcher.switchTo(availableStylesheets[activeStylesheetIndex]);};$.fn.styleswitcher.switchTo=function(styleName){var href;var links=document.getElementsByTagName('link');$(links).each(function(){href=$(this).attr('href');if(availableStylesheets.join().match(href.substring(href.search('[^/]*$')))){$(this).remove();}});Utils.addCSSSupportFile(Utils.getSupportPath()+"/styleswitcher/"+styleName);activeStylesheetIndex=availableStylesheets.indexOf(styleName);createCookie(params.cookie,styleName,365);};[].indexOf||(Array.prototype.indexOf=function(v,n){n=(n==null)?0:n;var m=this.length;for(var i=n;i<m;i++)
if(this[i]==v)
return i;return-1;});function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else
var expires="";document.cookie=name+"="+value+expires+"; path=/";}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')
c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)
return c.substring(nameEQ.length,c.length);}
return null;}
function eraseCookie(name){createCookie(name,"",-1);}})(jQuery);Utils.addCSSSupportFile(Utils.getSupportPath()+"/styleswitcher/style.css");